import json
import requests
from requests.exceptions import ConnectionError, RequestException, Timeout

proxy2 = """118.69.134.1:80
153.92.214.224:80
49.228.131.169:5000
178.62.92.133:80
131.196.212.172:80
134.195.101.34:8080
220.73.173.111:3001
161.117.81.228:483
115.96.208.124:8080
202.173.220.50:1122
188.166.17.18:8881
212.145.210.146:80
133.18.234.13:80
51.124.209.11:80
51.15.242.202:8888
150.107.136.110:8082
109.194.101.128:3128
47.253.105.175:5000
50.206.25.109:80
50.174.7.153:80
50.204.219.226:80
20.205.61.143:80
50.221.166.2:80
50.168.210.238:80
50.168.72.122:80
50.174.7.155:80
50.228.141.97:80
50.171.32.225:80
68.185.57.66:80
50.222.245.41:80
50.173.140.151:80
50.207.199.82:80
50.168.163.180:80
50.171.68.130:80
50.228.141.100:80
50.168.163.181:80
50.207.199.80:80
50.217.226.46:80
50.200.12.80:80
50.217.226.41:80
107.1.93.222:80
50.207.199.81:80
50.217.226.43:80
50.168.72.117:80
50.168.163.177:80
116.203.28.43:80
50.171.32.227:80
50.204.233.30:80
50.222.245.46:80
50.174.7.152:80
50.237.207.186:80
50.206.111.90:80
213.157.6.50:80
50.174.7.154:80
50.217.226.44:80
41.207.187.178:80
107.1.93.213:80
24.205.201.186:80
50.171.152.30:80
50.174.7.157:80
186.121.235.66:8080
72.10.160.91:14417
50.218.57.74:80
72.10.160.90:18821
50.204.190.234:80
50.207.253.118:80
50.168.163.183:80
50.218.57.71:80
50.168.72.115:80
50.200.12.82:80
96.113.159.162:80
50.168.72.116:80
50.222.245.50:80
50.222.245.43:80
50.204.219.224:80
195.23.57.78:80
198.98.60.66:80
82.119.96.254:80
50.204.219.225:80
62.141.11.68:80
50.206.25.105:80
185.140.53.137:80
50.217.226.40:80
50.171.32.224:80
107.1.93.214:80
107.1.93.215:80
50.220.168.134:80
107.1.93.212:80
190.58.248.86:80
64.201.163.133:80
107.1.93.220:80
213.143.113.82:80
50.217.226.47:80
50.228.141.99:80
213.33.126.130:80
50.168.34.138:80
213.33.2.28:80
62.99.138.162:80
50.174.41.66:80
103.149.238.206:8080
45.224.22.63:999
103.115.31.3:8080
8.219.97.248:80
72.10.160.173:33107
154.202.121.228:3128
198.49.68.80:80
82.180.139.155:80
103.176.108.1:1339
178.165.42.166:3128
154.202.125.158:3128
117.103.69.236:8080
200.105.215.22:33630
94.232.11.178:46449
154.202.113.137:3128
192.177.93.216:3128
154.202.115.145:3128
198.27.115.215:80
213.97.161.224:3128
77.251.121.64:3311
107.6.27.132:80
188.166.56.246:80
51.79.50.31:9300
41.77.188.131:80
138.68.235.51:80
146.59.202.70:80
43.157.67.116:8888
43.157.10.238:8888
50.171.32.228:80
50.171.32.226:80
50.207.199.86:80
50.170.90.25:80
50.200.12.86:80
80.228.235.6:80
50.228.141.103:80
50.171.32.222:80
107.1.93.223:80
50.174.7.162:80
50.168.49.107:80
211.128.96.206:80
107.1.93.208:80
50.168.163.182:80
50.222.245.44:80
50.206.111.89:80
50.173.140.145:80
85.26.146.169:80
50.227.121.35:80
50.174.7.158:80
50.174.145.11:80
50.174.145.8:80
50.228.141.96:80
207.2.120.19:80
107.1.93.218:80
50.228.141.98:80
50.218.57.69:80
188.121.103.205:80
50.170.90.30:80
50.227.121.32:80
50.168.49.110:80
154.65.39.7:80
50.206.111.88:80
50.172.23.10:80
41.230.216.70:80
189.202.188.149:80
50.173.140.147:80
50.168.72.118:80
50.206.111.91:80
50.172.75.122:80
50.217.226.42:80
50.227.121.38:80
50.174.145.14:80
50.174.145.13:80
80.150.50.226:80
50.168.72.113:80
50.170.90.27:80
85.8.68.2:80
50.235.240.86:80
50.207.199.87:80
50.170.90.24:80
127.0.0.7:80
50.218.57.67:80
47.88.62.42:80
43.157.8.79:8888
50.168.163.166:80
50.218.57.64:80
50.170.90.34:80
154.201.61.209:3128
104.164.183.80:3128
154.202.108.123:3128
154.202.103.43:3128
104.165.127.19:3128
192.210.159.240:3128
154.202.127.10:3128
156.239.49.113:3128
149.18.31.165:8085
154.202.125.114:3128
154.202.123.86:3128
154.201.62.175:3128
194.110.150.216:8085
154.202.123.174:3128
154.202.126.27:3128
156.239.51.45:3128
154.202.122.171:3128
154.202.106.128:3128
154.202.104.4:3128
154.84.142.209:3128
154.201.62.217:3128
193.233.230.169:8085
154.202.118.108:3128
156.239.49.69:3128
156.239.49.239:3128
154.202.115.73:3128
141.98.85.183:8085
154.202.110.117:3128
154.201.62.65:3128
154.202.100.102:3128
156.239.49.215:3128
45.132.185.159:8085
154.201.62.151:3128
192.210.159.214:3128
154.202.109.24:3128
209.127.136.44:3128
154.84.143.241:3128
154.202.114.244:3128
154.84.143.21:3128
194.110.150.208:8085
154.202.108.181:3128
154.202.124.129:3128
154.202.109.72:3128
154.202.124.91:3128
154.202.115.227:3128
154.202.97.30:3128
154.201.38.49:3128
154.202.100.206:3128
154.202.117.175:3128
154.202.97.224:3128
154.202.102.232:3128
154.202.105.2:3128
156.239.55.59:3128
154.202.108.177:3128
154.202.97.218:3128
104.164.183.195:3128
193.233.142.195:8085
154.202.107.192:3128
154.201.62.81:3128
213.108.1.114:8085
45.66.209.252:8085
154.202.97.36:3128
154.84.140.247:3128
154.84.140.78:3128
45.199.137.139:3128
154.201.37.95:3128
154.202.124.111:3128
154.202.126.41:3128
45.10.165.226:8085
209.127.62.184:3128
149.57.15.110:8085
185.94.33.132:8085
154.83.9.194:3128
154.84.142.91:3128
193.233.138.164:8085
154.202.100.223:3128
154.202.121.28:3128
154.202.126.75:3128
156.239.50.14:3128
193.93.192.193:8085
154.202.106.126:3128
154.202.122.7:3128
154.202.102.248:3128
154.202.108.63:3128
154.202.103.126:3128
178.20.212.198:8085
154.84.142.207:3128
154.202.118.195:3128
154.202.120.13:3128
154.202.117.229:3128
104.164.183.57:3128
91.242.228.188:8085
185.94.32.246:8085
154.202.127.12:3128
154.84.142.15:3128
154.202.124.169:3128
154.202.120.169:3128
154.202.108.43:3128
192.210.159.82:3128
156.239.53.229:3128
154.202.101.219:3128
154.202.103.222:3128
45.80.107.129:8085
154.202.123.36:3128
154.202.96.123:3128
45.39.72.168:3128
123.205.34.84:80
193.233.141.62:8085
91.242.228.149:8085
154.201.62.3:3128
91.243.92.223:8085
91.243.89.214:8085
154.202.117.224:3128
154.202.96.47:3128"""

proxy2 = proxy2.split("\n")
proxy2 = [proxy.split(":") for proxy in proxy2]
proxy_list = [{"ip": proxy[0], "port": proxy[1]} for proxy in proxy2]

# Define the URL you want to test (e.g., "https://www.google.com")
test_url = "https://www.google.com"

# Function to check if a proxy is available
def is_proxy_available(proxy_url):
    try:
        response = requests.get(test_url, proxies={"http": proxy_url, "https": proxy_url}, timeout=10)
        if response.status_code == 200:
            return True
    except (ConnectionError, RequestException, Timeout):
        pass
    return False

# Iterate through the list of proxies and find the first available one
available_proxy = None

for proxy in proxy_list:
    print(f"Checking proxy {proxy['ip']}:{proxy['port']}...")
    proxy_url = f"http://{proxy['ip']}:{proxy['port']}"
    if is_proxy_available(proxy_url):
        available_proxy = proxy_url
        break

if available_proxy:
    print(f"Available proxy found: {available_proxy}")
else:
    print("No available proxies found.")

# You can now use `available_proxy` for your web scraping tasks.
